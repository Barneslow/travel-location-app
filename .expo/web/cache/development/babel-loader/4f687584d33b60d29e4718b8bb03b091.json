{"ast":null,"code":"function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport * as SQLite from \"expo-sqlite\";\nimport { Place } from \"../models/place\";\nvar database = SQLite.openDatabase(\"places.db\");\nexport function init() {\n  var promise = new Promise(function (resolve, reject) {\n    database.transaction(function (tx) {\n      tx.executeSql(\"CREATE TABLE IF NOT EXISTS places (\\n        id INTEGER PRIMARY KEY NOT NULL,\\n        title TEXT NOT NULL,\\n        imageUri TEXT NOT NULL,\\n        address TEXT NOT NULL,\\n        lat REAL NOT NULL,\\n        lng REAL NOT NULL\\n    )\", [], function () {\n        resolve();\n      }, function (_, error) {\n        reject(error);\n      });\n    });\n  });\n  return promise;\n}\nexport function insertPlace(place) {\n  var promise = new Promise(function (resolve, reject) {\n    database.transaction(function (tx) {\n      tx.executeSql(\"INSERT INTO places (title, imageUri, address, lat, lng) VALUES (?, ?, ?, ?, ?)\", [place.title, place.imageUri, place.address, place.location.lat, place.location.lng], function (_, result) {\n        resolve(result);\n        console.log(result);\n      }, function (_, error) {\n        reject(error);\n      });\n    });\n  });\n  return promise;\n}\nexport function fetchPlaces() {\n  var promise = new Promise(function (resolve, reject) {\n    database.transaction(function (tx) {\n      tx.executeSql(\"SELECT * FROM places\", [], function (_, result) {\n        console.log(result);\n        var places = [];\n\n        for (var _iterator = _createForOfIteratorHelperLoose(result.rows._array), _step; !(_step = _iterator()).done;) {\n          var dp = _step.value;\n          places.push(new Place(dp.title, dp.imageUri, {\n            address: dp.address,\n            lat: dp.lat,\n            lng: dp.lng\n          }, dp.id));\n        }\n\n        resolve(places);\n      }, function (_, error) {\n        reject(error);\n      });\n    });\n  });\n  return promise;\n}","map":{"version":3,"names":["SQLite","Place","database","openDatabase","init","promise","Promise","resolve","reject","transaction","tx","executeSql","_","error","insertPlace","place","title","imageUri","address","location","lat","lng","result","console","log","fetchPlaces","places","rows","_array","dp","push","id"],"sources":["/Users/darrachbarneveld/Downloads/react-native-practical-guide-code-12-native-features/code/02-adding-an-add-place-screen-navigation/util/database.js"],"sourcesContent":["import * as SQLite from \"expo-sqlite\";\nimport { Place } from \"../models/place\";\n\nconst database = SQLite.openDatabase(\"places.db\");\n\nexport function init() {\n  const promise = new Promise((resolve, reject) => {\n    database.transaction((tx) => {\n      tx.executeSql(\n        `CREATE TABLE IF NOT EXISTS places (\n        id INTEGER PRIMARY KEY NOT NULL,\n        title TEXT NOT NULL,\n        imageUri TEXT NOT NULL,\n        address TEXT NOT NULL,\n        lat REAL NOT NULL,\n        lng REAL NOT NULL\n    )`,\n        [],\n        () => {\n          resolve();\n        },\n        (_, error) => {\n          reject(error);\n        }\n      );\n    });\n  });\n  return promise;\n}\n\nexport function insertPlace(place) {\n  const promise = new Promise((resolve, reject) => {\n    database.transaction((tx) => {\n      tx.executeSql(\n        `INSERT INTO places (title, imageUri, address, lat, lng) VALUES (?, ?, ?, ?, ?)`,\n        [\n          place.title,\n          place.imageUri,\n          place.address,\n          place.location.lat,\n          place.location.lng,\n        ],\n        (_, result) => {\n          resolve(result);\n          console.log(result);\n        },\n        (_, error) => {\n          reject(error);\n        }\n      );\n    });\n  });\n\n  return promise;\n}\n\nexport function fetchPlaces() {\n  const promise = new Promise((resolve, reject) => {\n    database.transaction((tx) => {\n      tx.executeSql(\n        \"SELECT * FROM places\",\n        [],\n        (_, result) => {\n          console.log(result);\n          const places = [];\n          for (const dp of result.rows._array) {\n            places.push(\n              new Place(\n                dp.title,\n                dp.imageUri,\n                {\n                  address: dp.address,\n                  lat: dp.lat,\n                  lng: dp.lng,\n                },\n                dp.id\n              )\n            );\n          }\n          resolve(places);\n        },\n        (_, error) => {\n          reject(error);\n        }\n      );\n    });\n  });\n\n  return promise;\n}\n"],"mappings":";;;;;;AAAA,OAAO,KAAKA,MAAZ,MAAwB,aAAxB;AACA,SAASC,KAAT;AAEA,IAAMC,QAAQ,GAAGF,MAAM,CAACG,YAAP,CAAoB,WAApB,CAAjB;AAEA,OAAO,SAASC,IAAT,GAAgB;EACrB,IAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;IAC/CN,QAAQ,CAACO,WAAT,CAAqB,UAACC,EAAD,EAAQ;MAC3BA,EAAE,CAACC,UAAH,+OASE,EATF,EAUE,YAAM;QACJJ,OAAO;MACR,CAZH,EAaE,UAACK,CAAD,EAAIC,KAAJ,EAAc;QACZL,MAAM,CAACK,KAAD,CAAN;MACD,CAfH;IAiBD,CAlBD;EAmBD,CApBe,CAAhB;EAqBA,OAAOR,OAAP;AACD;AAED,OAAO,SAASS,WAAT,CAAqBC,KAArB,EAA4B;EACjC,IAAMV,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;IAC/CN,QAAQ,CAACO,WAAT,CAAqB,UAACC,EAAD,EAAQ;MAC3BA,EAAE,CAACC,UAAH,mFAEE,CACEI,KAAK,CAACC,KADR,EAEED,KAAK,CAACE,QAFR,EAGEF,KAAK,CAACG,OAHR,EAIEH,KAAK,CAACI,QAAN,CAAeC,GAJjB,EAKEL,KAAK,CAACI,QAAN,CAAeE,GALjB,CAFF,EASE,UAACT,CAAD,EAAIU,MAAJ,EAAe;QACbf,OAAO,CAACe,MAAD,CAAP;QACAC,OAAO,CAACC,GAAR,CAAYF,MAAZ;MACD,CAZH,EAaE,UAACV,CAAD,EAAIC,KAAJ,EAAc;QACZL,MAAM,CAACK,KAAD,CAAN;MACD,CAfH;IAiBD,CAlBD;EAmBD,CApBe,CAAhB;EAsBA,OAAOR,OAAP;AACD;AAED,OAAO,SAASoB,WAAT,GAAuB;EAC5B,IAAMpB,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;IAC/CN,QAAQ,CAACO,WAAT,CAAqB,UAACC,EAAD,EAAQ;MAC3BA,EAAE,CAACC,UAAH,CACE,sBADF,EAEE,EAFF,EAGE,UAACC,CAAD,EAAIU,MAAJ,EAAe;QACbC,OAAO,CAACC,GAAR,CAAYF,MAAZ;QACA,IAAMI,MAAM,GAAG,EAAf;;QACA,qDAAiBJ,MAAM,CAACK,IAAP,CAAYC,MAA7B,wCAAqC;UAAA,IAA1BC,EAA0B;UACnCH,MAAM,CAACI,IAAP,CACE,IAAI7B,KAAJ,CACE4B,EAAE,CAACb,KADL,EAEEa,EAAE,CAACZ,QAFL,EAGE;YACEC,OAAO,EAAEW,EAAE,CAACX,OADd;YAEEE,GAAG,EAAES,EAAE,CAACT,GAFV;YAGEC,GAAG,EAAEQ,EAAE,CAACR;UAHV,CAHF,EAQEQ,EAAE,CAACE,EARL,CADF;QAYD;;QACDxB,OAAO,CAACmB,MAAD,CAAP;MACD,CArBH,EAsBE,UAACd,CAAD,EAAIC,KAAJ,EAAc;QACZL,MAAM,CAACK,KAAD,CAAN;MACD,CAxBH;IA0BD,CA3BD;EA4BD,CA7Be,CAAhB;EA+BA,OAAOR,OAAP;AACD"},"metadata":{},"sourceType":"module"}