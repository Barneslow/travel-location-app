{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useLayoutEffect, useState } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport MapView, { Marker } from \"react-native-maps\";\nimport IconButton from \"../components/ui/IconButton\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar Map = function Map(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedLocation = _useState2[0],\n      setSelectedLocation = _useState2[1];\n\n  var initialRegion = {\n    latitude: 37.78825,\n    longitude: -122.4324,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421\n  };\n\n  function selectLocationHandler(event) {\n    var lat = event.nativeEvent.coordinate.latitude;\n    var lng = event.nativeEvent.coordinate.longitude;\n    setSelectedLocation({\n      lat: lat,\n      lng: lng\n    });\n  }\n\n  var savedPickedLocationHandler = useCallback(function () {\n    if (!selectedLocation) {\n      Alert.alert(\"No Location Picked\", \"Select a location on the map!\");\n      return;\n    }\n\n    navigation.navigate(\"AddPlace\", {\n      pickedLat: selectedLocation.lat,\n      pickedLng: selectedLocation.lng\n    });\n  }, [navigation, selectedLocation]);\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight(_ref2) {\n        var tintColor = _ref2.tintColor;\n        return _jsx(IconButton, {\n          icon: \"save\",\n          size: 24,\n          color: tintColor,\n          onPress: savedPickedLocationHandler\n        });\n      }\n    });\n  }, [savedPickedLocationHandler, navigation]);\n  return _jsx(MapView, {\n    style: styles.map,\n    initialRegion: initialRegion,\n    onPress: selectLocationHandler,\n    children: selectedLocation && _jsx(Marker, {\n      title: \"Picked Location\",\n      coordinate: {\n        latitude: selectedLocation.lat,\n        longitude: selectedLocation.lng\n      }\n    })\n  });\n};\n\nexport default Map;\nvar styles = StyleSheet.create({\n  map: {\n    flex: 1\n  }\n});","map":{"version":3,"names":["useCallback","useLayoutEffect","useState","MapView","Marker","IconButton","Map","navigation","selectedLocation","setSelectedLocation","initialRegion","latitude","longitude","latitudeDelta","longitudeDelta","selectLocationHandler","event","lat","nativeEvent","coordinate","lng","savedPickedLocationHandler","Alert","alert","navigate","pickedLat","pickedLng","setOptions","headerRight","tintColor","styles","map","StyleSheet","create","flex"],"sources":["/Users/darrachbarneveld/Downloads/react-native-practical-guide-code-12-native-features/code/02-adding-an-add-place-screen-navigation/screens/Map.js"],"sourcesContent":["import { useCallback, useLayoutEffect, useState } from \"react\";\nimport { Alert, StyleSheet } from \"react-native\";\nimport MapView, { Marker } from \"react-native-maps\";\nimport IconButton from \"../components/ui/IconButton\";\n\nconst Map = ({ navigation }) => {\n  const [selectedLocation, setSelectedLocation] = useState();\n\n  const initialRegion = {\n    latitude: 37.78825,\n    longitude: -122.4324,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421,\n  };\n\n  function selectLocationHandler(event) {\n    const lat = event.nativeEvent.coordinate.latitude;\n    const lng = event.nativeEvent.coordinate.longitude;\n\n    setSelectedLocation({ lat: lat, lng: lng });\n  }\n\n  const savedPickedLocationHandler = useCallback(() => {\n    if (!selectedLocation) {\n      Alert.alert(\"No Location Picked\", \"Select a location on the map!\");\n      return;\n    }\n\n    navigation.navigate(\"AddPlace\", {\n      pickedLat: selectedLocation.lat,\n      pickedLng: selectedLocation.lng,\n    });\n  }, [navigation, selectedLocation]);\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: ({ tintColor }) => (\n        <IconButton\n          icon=\"save\"\n          size={24}\n          color={tintColor}\n          onPress={savedPickedLocationHandler}\n        />\n      ),\n    });\n  }, [savedPickedLocationHandler, navigation]);\n\n  return (\n    <MapView\n      style={styles.map}\n      initialRegion={initialRegion}\n      onPress={selectLocationHandler}\n    >\n      {selectedLocation && (\n        <Marker\n          title=\"Picked Location\"\n          coordinate={{\n            latitude: selectedLocation.lat,\n            longitude: selectedLocation.lng,\n          }}\n        />\n      )}\n    </MapView>\n  );\n};\n\nexport default Map;\n\nconst styles = StyleSheet.create({\n  map: {\n    flex: 1,\n  },\n});\n"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,eAAtB,EAAuCC,QAAvC,QAAuD,OAAvD;;;AAEA,OAAOC,OAAP,IAAkBC,MAAlB,QAAgC,mBAAhC;AACA,OAAOC,UAAP;;;AAEA,IAAMC,GAAG,GAAG,SAANA,GAAM,OAAoB;EAAA,IAAjBC,UAAiB,QAAjBA,UAAiB;;EAC9B,gBAAgDL,QAAQ,EAAxD;EAAA;EAAA,IAAOM,gBAAP;EAAA,IAAyBC,mBAAzB;;EAEA,IAAMC,aAAa,GAAG;IACpBC,QAAQ,EAAE,QADU;IAEpBC,SAAS,EAAE,CAAC,QAFQ;IAGpBC,aAAa,EAAE,MAHK;IAIpBC,cAAc,EAAE;EAJI,CAAtB;;EAOA,SAASC,qBAAT,CAA+BC,KAA/B,EAAsC;IACpC,IAAMC,GAAG,GAAGD,KAAK,CAACE,WAAN,CAAkBC,UAAlB,CAA6BR,QAAzC;IACA,IAAMS,GAAG,GAAGJ,KAAK,CAACE,WAAN,CAAkBC,UAAlB,CAA6BP,SAAzC;IAEAH,mBAAmB,CAAC;MAAEQ,GAAG,EAAEA,GAAP;MAAYG,GAAG,EAAEA;IAAjB,CAAD,CAAnB;EACD;;EAED,IAAMC,0BAA0B,GAAGrB,WAAW,CAAC,YAAM;IACnD,IAAI,CAACQ,gBAAL,EAAuB;MACrBc,KAAK,CAACC,KAAN,CAAY,oBAAZ,EAAkC,+BAAlC;MACA;IACD;;IAEDhB,UAAU,CAACiB,QAAX,CAAoB,UAApB,EAAgC;MAC9BC,SAAS,EAAEjB,gBAAgB,CAACS,GADE;MAE9BS,SAAS,EAAElB,gBAAgB,CAACY;IAFE,CAAhC;EAID,CAV6C,EAU3C,CAACb,UAAD,EAAaC,gBAAb,CAV2C,CAA9C;EAYAP,eAAe,CAAC,YAAM;IACpBM,UAAU,CAACoB,UAAX,CAAsB;MACpBC,WAAW,EAAE;QAAA,IAAGC,SAAH,SAAGA,SAAH;QAAA,OACX,KAAC,UAAD;UACE,IAAI,EAAC,MADP;UAEE,IAAI,EAAE,EAFR;UAGE,KAAK,EAAEA,SAHT;UAIE,OAAO,EAAER;QAJX,EADW;MAAA;IADO,CAAtB;EAUD,CAXc,EAWZ,CAACA,0BAAD,EAA6Bd,UAA7B,CAXY,CAAf;EAaA,OACE,KAAC,OAAD;IACE,KAAK,EAAEuB,MAAM,CAACC,GADhB;IAEE,aAAa,EAAErB,aAFjB;IAGE,OAAO,EAAEK,qBAHX;IAAA,UAKGP,gBAAgB,IACf,KAAC,MAAD;MACE,KAAK,EAAC,iBADR;MAEE,UAAU,EAAE;QACVG,QAAQ,EAAEH,gBAAgB,CAACS,GADjB;QAEVL,SAAS,EAAEJ,gBAAgB,CAACY;MAFlB;IAFd;EANJ,EADF;AAiBD,CA3DD;;AA6DA,eAAed,GAAf;AAEA,IAAMwB,MAAM,GAAGE,UAAU,CAACC,MAAX,CAAkB;EAC/BF,GAAG,EAAE;IACHG,IAAI,EAAE;EADH;AAD0B,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}